{% load static %}
{# Grab the current path once for active-link checks #}
  {% with p=request.path %}
  <nav style="
      width:100%;
      background:#232D4B;             /* UVA navy */
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:flex-start;
      padding:10px 16px;
      box-sizing:border-box;
      position:relative;

  ">
   <style>
    /* Shared smooth animation for nav links + brand */
    .nav-link, .brand {
      display: inline-block;
      text-decoration: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s ease, opacity 0.2s ease, color 0.2s ease;
      position: relative;
    }
  
    /* Hover lift + underline animation */
    .nav-link:hover, .brand:hover {
      transform: translateY(-3px);
      opacity: 0.9;
    }
  
    /* Animated UVA Orange underline */
    .nav-link::after, .brand::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      height: 3px;
      width: 0%;
      background: #E57200; /* UVA Orange */
      transition: width 0.25s ease-in-out;
    }
    .nav-link:hover::after, .brand:hover::after {
      width: 100%;
    }
  
    /* ACTIVE PAGE styling â†’ highlight text, not background */
    .active-link {
      color: #E57200 !important;  /* UVA Orange */
      font-weight: bold;
    }
    .active-link::after {
      width: 100%;
    }

    /* ======= ADD-ONS: site-wide polish (kept nav intact) ======= */
    :root{
      --uva-navy:#232D4B;
      --uva-orange:#E57200;
      --uva-ink:#0A122A;
      --uva-cloud:#f8f9fb;
    }
    /* container + layout helpers */
    .container{ max-width: 1100px; margin: 0 auto; padding: 0 16px; box-sizing: border-box; }
    .mt-24{ margin-top:24px; }
    .mt-40{ margin-top:40px; }

  
  
    /* Footer */
    .site-footer{
      background:#10172A; color:#aab3c5; padding:18px 0; margin-top:40px; font-size:14px;
      border-top: 3px solid var(--uva-orange);
    }

    /* Accessibility & motion */
    @media (prefers-reduced-motion: reduce){
      *, *::before, *::after{ transition:none !important; }
    }

    /* Responsive tweaks */
    @media (max-width: 768px){
      .hero h1{ font-size:28px; }
      .grid{ grid-template-columns:repeat(6,1fr); }
      .col-4{ grid-column: span 6; }
    }
  </style>

    <!-- Brand -->
    <a href="/"
        class="brand {% if p == '/' %}active-link{% endif %}"
        style="display:flex; gap:10px; align-items:center; text-decoration:none; color:#fff;">
    <img src="{% static 'img/image.png' %}"
        alt="UVA Leftovers Logo"
        style="height:28px; width:28px; object-fit:contain;">
    <strong style="letter-spacing:.3px;">UVA Leftovers</strong>
    </a>

    <!-- Center links (includes role-aware item) -->
    < style="
        list-style:none;
        display:flex;
        gap:20px;
        margin:0;
        padding:0;
        position:absolute;
        left:50%;
        transform:translateX(-50%);
        align-items:center;
        ">
        <li>
        <a href="{% url 'profile_redirect' %}"
            class="nav-link {% if '/profile' in p %}active-link{% endif %}"
            style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
            Profile
        </a>
        </li>

        {% if user.is_authenticated %}
        {% with role=user.profile.role %}
            {% if role == 'student' %}
            <li>
                <a href="{% url 'userprivileges:student_home' %}"
                class="nav-link {% if '/student' in p %}active-link{% endif %}"
                style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
                Food Listings
                </a>
            </li>
            {% elif role == 'org' %}
            <li>
                <a href="{% url 'userprivileges:provider_home' %}"
                class="nav-link {% if '/provider' in p %}active-link{% endif %}"
                style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
                Post Listings
                </a>
            </li>
            {% endif %}
        {% endwith %}
        
        {% endif %}

        <li>
        <a href="#" 
            class="nav-link"
            style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
            About
        </a>
        </li>
        <li>
        <a href="{% url 'chat:index' %}"
            class="nav-link"
            style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
            Chat
        </a>
        </li>
        <li>
        <a href="{% url 'Friendslist:index' %}"
            class="nav-link"
            style="text-decoration:none; color:#fff; padding:6px 10px; border-radius:6px;">
            Friends Request
        </a>
        </li>
        </ul>
    <!-- Auth -->
    <div style="margin-left:auto; display:flex; gap:12px; align-items:center;">
      {% if not user.is_authenticated %}
        <a href="{% url 'loginpage:login' %}"
           class="nav-link"
           style="text-decoration:none; color:#ffffff; padding:6px 10px; border-radius:6px;">
          Log In
        </a>
      {% else %}
        <a href="{% url 'account_logout' %}"
           class="nav-link"
           style="text-decoration:none; color:#ffffff; padding:6px 10px; border-radius:6px;">
          Log Out
        </a>
      {% endif %}
    </div>
  </nav>
  {% endwith %}

  