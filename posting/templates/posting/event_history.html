{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 40px auto;">

  <h1 style="text-align:center; color:#232D4B; margin-bottom:10px;">
    Event History
  </h1>
  <p style="text-align:center; color:#555; margin-bottom:30px;">
    Browse past leftover food events to see which organizations regularly share food.
  </p>

  {% if posts %}
    {% for post in posts %}
      <div style="border:1px solid #ddd; border-radius:12px; padding:20px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,0.05);">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <h2 style="margin:0; font-size:24px;">{{ post.event }}</h2>
            <span style="font-size:24px; color:#666;">
                <strong style="color:#232D4B;">
                    {{ post.author.username }}</strong>
            </span>
        </div>

        {% if post.image %}
          <img src="{{ post.image.url }}" alt="{{ post.event }}"
               style="width:50%; max-width:300px; height:auto; border-radius:8px; margin-bottom:10px; display:block; margin-left:auto; margin-right:auto;">
        {% endif %}

        <p style="margin:0; color:#555;">
          <strong>Date:</strong> {{ post.created_at|date:"M d, Y" }}<br>
          <strong>Cuisine:</strong> {{ post.cuisine.name }}<br>
        </p>

        {% if post.event_description %}
          <p style="margin-top:10px; color:#333;">{{ post.event_description|truncatewords:25 }}</p>
        {% endif %}

        <div style="margin-top:10px;">
          <a href="{% url 'posting:post_detail' post.id %}"
             style="text-decoration:none; color:#232D4B; font-weight:bold;">
             View Details →
          </a>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p style="text-align:center; color:#666;">No past events yet.</p>
  {% endif %}

  {% if page_obj %}
    <div style="text-align:center; margin-top:20px;">
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}" style="margin-right:10px;">« Previous</a>
      {% endif %}
      <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" style="margin-left:10px;">Next »</a>
      {% endif %}
    </div>
  {% endif %}

  

</div>
{% endblock %}