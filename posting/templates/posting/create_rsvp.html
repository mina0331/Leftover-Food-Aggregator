{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container" style="max-width: 600px; margin: 40px auto;">
  <a href="{% url 'posting:post_detail' post.id %}"
     style="text-decoration:none; color:#232D4B; font-weight:bold;">
     ← Back to Post
  </a>

  <div style="border:1px solid #ddd; border-radius:12px; padding:24px; margin-top:20px;
              box-shadow:0 2px 6px rgba(0,0,0,0.05); background:white;">
    <h1 style="margin-top:0; color:#232D4B;">RSVP to Pick Up Food</h1>
    
    <div style="background:#fff3cd; border-left:4px solid #ffc107; padding:12px; margin-bottom:20px; border-radius:4px;">
      <p style="margin:0; color:#856404; font-size:0.9rem;">
        <strong>⚠️ Important:</strong> Food is not guaranteed if you arrive late. 
        Please provide an accurate estimate of your arrival time.
      </p>
    </div>

    <p style="color:#555; margin-bottom:20px;">
      <strong>Post:</strong> {{ post.event }}<br>
      <strong>Location:</strong> {{ post.location.building_name|default:"Not specified" }}<br>
      {% if post.pickup_deadline %}
        <strong>Pickup Available Until:</strong> 
        <span style="color:#4caf50; font-weight:600;">
          {{ post.pickup_deadline|date:"M d, Y, g:i A" }} ({{ post.get_time_until_deadline }} remaining)
        </span>
      {% else %}
        <strong>Pickup Available:</strong> <span style="color:#4caf50;">No specific deadline</span>
      {% endif %}
    </p>
    
    {% if post.pickup_deadline %}
      <div style="background:#fff3cd; border-left:4px solid #ffc107; padding:12px; margin-bottom:20px; border-radius:4px;">
        <p style="margin:0; color:#856404; font-size:0.9rem;">
          <strong>⏰ Deadline:</strong> Food will only be available until {{ post.pickup_deadline|date:"g:i A" }}. 
          Make sure your estimated arrival time is before this deadline.
        </p>
      </div>
    {% endif %}

    <form method="POST">
      {% csrf_token %}
      
      <div style="margin-bottom:20px;">
        <label for="{{ form.estimated_arrival_minutes.id_for_label }}" 
               style="display:block; margin-bottom:8px; color:#333; font-weight:600;">
          {{ form.estimated_arrival_minutes.label }}
        </label>
        {{ form.estimated_arrival_minutes }}
        {% if form.estimated_arrival_minutes.help_text %}
          <small style="display:block; margin-top:5px; color:#666;">
            {{ form.estimated_arrival_minutes.help_text }}
          </small>
        {% endif %}
        {% if form.estimated_arrival_minutes.errors %}
          <div style="color:#d32f2f; margin-top:5px; font-size:0.9rem;">
            {{ form.estimated_arrival_minutes.errors }}
          </div>
        {% endif %}
      </div>

      <div style="display:flex; gap:10px;">
        <button type="submit" 
                style="background:#4caf50; color:white; border:none; padding:12px 24px;
                       border-radius:6px; cursor:pointer; font-size:16px; font-weight:600;">
          Submit RSVP
        </button>
        <a href="{% url 'posting:post_detail' post.id %}"
           style="background:#95a5a6; color:white; padding:12px 24px;
                  border-radius:6px; text-decoration:none; font-size:16px;">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

